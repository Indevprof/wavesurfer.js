{"version":3,"file":"wavesurfer.markers.js","mappings":"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","sources":["webpack://WaveSurfer.[name]/webpack/universalModuleDefinition","webpack://WaveSurfer.[name]/./src/plugin/markers/index.js","webpack://WaveSurfer.[name]/webpack/bootstrap","webpack://WaveSurfer.[name]/webpack/before-startup","webpack://WaveSurfer.[name]/webpack/startup","webpack://WaveSurfer.[name]/webpack/after-startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"WaveSurfer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WaveSurfer\"] = factory();\n\telse\n\t\troot[\"WaveSurfer\"] = root[\"WaveSurfer\"] || {}, root[\"WaveSurfer\"][\"markers\"] = factory();\n})(self, function() {\nreturn ","/**\n * @typedef {Object} MarkerParams\n * @desc The parameters used to describe a marker.\n * @example wavesurfer.addMarker(regionParams);\n * @property {number} time The time to set the marker at\n * @property {?label} string An optional marker label\n * @property {?color} string Background color for marker\n * @property {?position} string \"top\" or \"bottom\", defaults to \"bottom\"\n * @property {?markerElement} element An HTML element to display instead of the default marker image\n * @property {?draggable} boolean Set marker as draggable, defaults to false\n * @property {?lineColor} string Color for marker line\n * @property {?labelColor} string Color for label\n * @property {?labelBackground} string Background color for label\n * @property {?noMarker} boolean If marker not needed\n */\n\n/**\n * Markers are points in time in the audio that can be jumped to.\n *\n * @implements {PluginClass}\n *\n * @example\n * import MarkersPlugin from 'wavesurfer.markers.js';\n *\n * // if you are using <script> tags\n * var MarkerPlugin = window.WaveSurfer.markers;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     MarkersPlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\n\nconst DEFAULT_FILL_COLOR = \"#D8D8D8\";\nconst DEFAULT_POSITION = \"bottom\";\n\nexport default class MarkersPlugin {\n  /**\n   * @typedef {Object} MarkersPluginParams\n   * @property {?MarkerParams[]} markers Initial set of markers\n   * @fires MarkersPlugin#marker-click\n   * @fires MarkersPlugin#marker-drag\n   * @fires MarkersPlugin#marker-drop\n   */\n\n  /**\n   * Markers plugin definition factory\n   *\n   * This function must be used to create a plugin definition which can be\n   * used by wavesurfer to correctly instantiate the plugin.\n   *\n   * @param {MarkersPluginParams} params parameters use to initialise the plugin\n   * @since 4.6.0\n   * @return {PluginDefinition} an object representing the plugin\n   */\n  static create(params) {\n    return {\n      name: 'markers',\n      deferInit: params && params.deferInit ? params.deferInit : false,\n      params: params,\n      staticProps: {\n        addMarker(options) {\n          if (!this.initialisedPluginList.markers) {\n            this.initPlugin('markers');\n          }\n          return this.markers.add(options);\n        },\n        clearMarkers() {\n          this.markers && this.markers.clear();\n                }\n      },\n            instance: MarkersPlugin\n    };\n  }\n\n  constructor(params, ws) {\n    this.params = params;\n    this.wavesurfer = ws;\n    this.util = ws.util;\n    this.style = this.util.style;\n    this.markerLineWidth = 1;\n    this.markerWidth = 11;\n    this.markerHeight = 22;\n    this.dragging = false;\n\n\n    this._onResize = () => {\n      this._updateMarkerPositions();\n    };\n\n    this._onBackendCreated = () => {\n      this.wrapper = this.wavesurfer.drawer.wrapper;\n      if (this.params.markers) {\n        this.params.markers.forEach(marker => this.add(marker));\n      }\n      window.addEventListener('resize', this._onResize, true);\n      window.addEventListener('orientationchange', this._onResize, true);\n      this.wavesurfer.on('zoom', this._onResize);\n\n      if (!this.markers.find(marker => marker.draggable)) {\n        return;\n      }\n\n      this.onMouseMove = (e) => this._onMouseMove(e);\n      window.addEventListener('mousemove', this.onMouseMove);\n\n      this.onMouseUp = (e) => this._onMouseUp(e);\n      window.addEventListener(\"mouseup\", this.onMouseUp);\n    };\n\n    this.markers = [];\n    this._onReady = () => {\n      this.wrapper = this.wavesurfer.drawer.wrapper;\n      this._updateMarkerPositions();\n    };\n  }\n\n  init() {\n    // Check if ws is ready\n    if (this.wavesurfer.isReady) {\n      this._onBackendCreated();\n      this._onReady();\n    } else {\n      this.wavesurfer.once('ready', this._onReady);\n      this.wavesurfer.once('backend-created', this._onBackendCreated);\n    }\n  }\n\n  destroy() {\n    this.wavesurfer.un('ready', this._onReady);\n    this.wavesurfer.un('backend-created', this._onBackendCreated);\n\n    this.wavesurfer.un('zoom', this._onResize);\n\n    window.removeEventListener('resize', this._onResize, true);\n    window.removeEventListener('orientationchange', this._onResize, true);\n\n    if (this.onMouseMove) {\n      window.removeEventListener('mousemove', this.onMouseMove);\n    }\n    if (this.onMouseUp) {\n            window.removeEventListener(\"mouseup\", this.onMouseUp);\n    }\n\n    this.clear();\n  }\n\n  /**\n   * Add a marker\n   *\n   * @param {MarkerParams} params Marker definition\n   * @return {object} The created marker\n   */\n  add(params) {\n    let marker = {\n      time: params.time,\n      label: params.label,\n      color: params.color || DEFAULT_FILL_COLOR,\n      position: params.position || DEFAULT_POSITION,\n      draggable: !!params.draggable,\n      labelColor: params.labelColor,\n      labelBackground: params.labelBackground,\n      lineColor: params.lineColor,\n      noMarker: params.noMarker,\n    };\n\n    marker.el = this._createMarkerElement(marker, params.markerElement);\n\n    this.wrapper.appendChild(marker.el);\n    this.markers.push(marker);\n    this._updateMarkerPositions();\n\n    return marker;\n  }\n\n  /**\n   * Remove a marker\n   *\n   * @param {number} index Index of the marker to remove\n   */\n  remove(index) {\n    let marker = this.markers[index];\n    if (!marker) {\n      return;\n    }\n\n    this.wrapper.removeChild(marker.el);\n    this.markers.splice(index, 1);\n  }\n\n  _createPointerSVG(color, position) {\n    const svgNS = \"http://www.w3.org/2000/svg\";\n\n    const el = document.createElementNS(svgNS, \"svg\");\n    const polygon = document.createElementNS(svgNS, \"polygon\");\n\n    el.setAttribute(\"viewBox\", \"0 0 40 80\");\n\n    polygon.setAttribute(\"id\", \"polygon\");\n    polygon.setAttribute(\"stroke\", \"#979797\");\n    polygon.setAttribute(\"fill\", color);\n    polygon.setAttribute(\"points\", \"20 0 40 30 40 80 0 80 0 30\");\n    if ( position == \"top\" ) {\n        polygon.setAttribute(\"transform\", \"rotate(180, 20 40)\");\n    }\n\n    el.appendChild(polygon);\n\n    this.style(el, {\n\t    width: this.markerWidth + \"px\",\n\t    height: this.markerHeight + \"px\",\n\t    \"min-width\": this.markerWidth + \"px\",\n\t    \"margin-right\": \"5px\",\n\t    \"z-index\": 4\n    });\n    return el;\n  }\n\n  _createMarkerElement(marker, markerElement) {\n    let label = marker.label;\n\n    const el = document.createElement('marker');\n        el.className = \"wavesurfer-marker\";\n\n    this.style(el, {\n        position: \"absolute\",\n        height: \"100%\",\n        display: \"flex\",\n        overflow: \"hidden\",\n        \"flex-direction\": (marker.position == \"top\" ? \"column-reverse\" : \"column\")\n    });\n\n    const line = document.createElement('div');\n    const width = markerElement ? markerElement.width : this.markerWidth;\n    marker.offset = (width - this.markerLineWidth) / 2;\n    this.style(line, {\n        \"flex-grow\": 1,\n        \"margin-left\": marker.offset + \"px\",\n        background: \"black\",\n        width: this.markerLineWidth + \"px\",\n        //opacity: 0.1\n    });\n    el.appendChild(line);\n\n    const labelDiv = document.createElement('div');\n\n    if (!marker.noMarker) {\n      const point = markerElement || this._createPointerSVG(marker.color, marker.position);\n      if (marker.draggable) {\n        point.draggable = false;\n      }\n      labelDiv.appendChild(point);\n    }\n\n    if (label) {\n      const labelEl = document.createElement('span');\n      labelEl.innerText = label;\n      this.style(labelEl, {\n        'font-family': 'monospace',\n        'font-size': '90%',\n        color: marker.labelColor || 'black',\n        background: marker.labelBackground,\n        padding: '2px',\n        margin: '2px',\n        'z-index': '5',\n        'border-radius': '4px',\n      });\n      labelDiv.appendChild(labelEl);\n    }\n\n    this.style(labelDiv, {\n        display: \"flex\",\n        \"align-items\": \"center\",\n        cursor: \"pointer\"\n    });\n\n    el.appendChild(labelDiv);\n\n    labelDiv.addEventListener(\"click\", e => {\n      e.stopPropagation();\n      // Click event is caught when the marker-drop event was dispatched.\n      // Drop event was dispatched at this moment, but this.dragging\n      // is waiting for the next tick to set as false\n      if (this.dragging) {\n        return;\n      }\n      this.wavesurfer.setCurrentTime(marker.time);\n         this.wavesurfer.fireEvent(\"marker-click\", marker, e);\n    });\n\n    if (marker.draggable) {\n        labelDiv.addEventListener(\"mousedown\", e => {\n        this.selectedMarker = marker;\n      });\n    }\n    return el;\n  }\n\n  _updateMarkerPositions() {\n    for (let i = 0; i < this.markers.length; i++) {\n      let marker = this.markers[i];\n      this._updateMarkerPosition(marker);\n    }\n  }\n\n  /**\n   * Update a marker position based on its time property.\n   *\n   * @private\n   * @param {MarkerParams} params The marker to update.\n   * @returns {void}\n   */\n  _updateMarkerPosition(params) {\n    \tconst duration = this.wavesurfer.getDuration();\n        const elementWidth =\n            this.wavesurfer.drawer.width /\n            this.wavesurfer.params.pixelRatio;\n\n    \tconst positionPct = Math.min(params.time / duration, 1);\n        const leftPx = ((elementWidth * positionPct) - params.offset);\n    \tthis.style(params.el, {\n            \"left\": leftPx + \"px\",\n            \"max-width\": (elementWidth - leftPx) + \"px\"\n    });\n  }\n\n  /**\n   * Fires `marker-drag` event, update the `time` property for the\n   * selected marker based on the mouse position, and calls to update\n   * its position.\n   *\n   * @private\n   * @param {MouseEvent} event The mouse event.\n   * @returns {void}\n   */\n  _onMouseMove(event) {\n\t    if (!this.selectedMarker) {\n\t     \treturn;\n\t    }\n\t    if (!this.dragging) {\n\t      \tthis.dragging = true;\n            this.wavesurfer.fireEvent(\"marker-drag\", this.selectedMarker, event);\n\t    }\n\t    this.selectedMarker.time = this.wavesurfer.drawer.handleEvent(event) * this.wavesurfer.getDuration();\n\t    this._updateMarkerPositions();\n  }\n\n  /**\n   * Fires `marker-drop` event and unselect the dragged marker.\n   *\n   * @private\n   * @param {MouseEvent} event The mouse event.\n   * @returns {void}\n   */\n  _onMouseUp(event) {\n\t    if (this.selectedMarker) {\n\t      setTimeout(() => {\n\t        this.selectedMarker = false;\n\t        this.dragging = false;\n\t      }, 0);\n\t    }\n\n\t    if (!this.dragging) {\n\t      return;\n\t    }\n\n\t    event.stopPropagation();\n\t    const duration = this.wavesurfer.getDuration();\n\t    this.selectedMarker.time = this.wavesurfer.drawer.handleEvent(event) * duration;\n\t    this._updateMarkerPositions();\n        this.wavesurfer.fireEvent(\"marker-drop\", this.selectedMarker, event);\n  }\n\n  /**\n   * Remove all markers\n   */\n  clear() {\n\t    while (this.markers.length > 0) {\n\t    \tthis.remove(0);\n\t    }\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/plugin/markers/index.js\");\n",""],"names":["DEFAULT_FILL_COLOR","DEFAULT_POSITION","MarkersPlugin","params","ws","wavesurfer","util","style","markerLineWidth","markerWidth","markerHeight","dragging","_onResize","_updateMarkerPositions","_onBackendCreated","wrapper","drawer","markers","forEach","marker","add","window","addEventListener","on","find","draggable","onMouseMove","e","_onMouseMove","onMouseUp","_onMouseUp","_onReady","isReady","once","un","removeEventListener","clear","time","label","color","position","labelColor","labelBackground","lineColor","noMarker","el","_createMarkerElement","markerElement","appendChild","push","index","removeChild","splice","svgNS","document","createElementNS","polygon","setAttribute","width","height","createElement","className","display","overflow","line","offset","background","labelDiv","point","_createPointerSVG","labelEl","innerText","padding","margin","cursor","stopPropagation","setCurrentTime","fireEvent","selectedMarker","i","length","_updateMarkerPosition","duration","getDuration","elementWidth","pixelRatio","positionPct","Math","min","leftPx","event","handleEvent","setTimeout","remove","name","deferInit","staticProps","addMarker","options","initialisedPluginList","initPlugin","clearMarkers","instance"],"sourceRoot":""}